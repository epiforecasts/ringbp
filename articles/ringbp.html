<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with {ringbp} • ringbp</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with {ringbp}">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ringbp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/ringbp.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/parameter-sweep.html">Scenario parameter sweep</a></li>
    <li><a class="dropdown-item" href="../articles/ringbp-model.html">{ringbp} Model Description</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/ringbp/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started with {ringbp}</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/ringbp/blob/main/vignettes/ringbp.Rmd" class="external-link"><code>vignettes/ringbp.Rmd</code></a></small>
      <div class="d-none name"><code>ringbp.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Understanding how an infectious disease might spread, and under what
conditions it can be controlled, is crucial for public health planning.
The {ringbp} R package provides tools for simulating infectious disease
transmission using a branching process model with explicit
representation of case detection, isolation, and contact tracing. The
package was developed in the early phase of the COVID-19 pandemic to
support epidemiological analyses of outbreak dynamics and control
feasibility.</p>
<p>This vignette provides a brief introduction to the package and
demonstrates how to:</p>
<ul>
<li>load ringbp</li>
<li>specify epidemiological parameters</li>
<li>run outbreak simulations</li>
<li>plot and summarise simulation results</li>
</ul>
<p>It concludes with a simplified version of the analysis of COVID-19
control feasibility from <span class="citation">Hellewell et al. (<a href="#ref-Hellewell2020">2020</a>)</span>.</p>
<p>Firstly, we load the {ringbp} package, as well as the {data.table}
and {tinyplot} packages which are used in this vignette.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiforecasts.io/ringbp">ringbp</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://grantmcdermott.com/tinyplot/" class="external-link">tinyplot</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-overview">Model overview<a class="anchor" aria-label="anchor" href="#model-overview"></a>
</h2>
<p>At its core, {ringbp} simulates outbreaks using a branching process
model. Each infected individual generates secondary infections according
to an offspring distribution, with modifications arising from:</p>
<ul>
<li>delays between infection, symptom onset, and isolation</li>
<li>probabilities governing asymptomatic infection and case
detection</li>
<li>optional intervention mechanisms such as quarantine</li>
</ul>
<p>Simulations are constructed by combining a set of options that
describe these components and then running one or more stochastic
outbreak realisations.</p>
<p>For a more detailed exposition of the {ringbp} epidemiological model
and how non-pharmaceutical interventions influence disease transmission
see the <a href="ringbp-model.html"><code>ringbp-model.Rmd</code>
vignette</a>.</p>
</div>
<div class="section level2">
<h2 id="specifying-model-components">Specifying model components<a class="anchor" aria-label="anchor" href="#specifying-model-components"></a>
</h2>
<div class="section level3">
<h3 id="offspring-distributions">Offspring distributions<a class="anchor" aria-label="anchor" href="#offspring-distributions"></a>
</h3>
<div class="alert alert-info">
<p>The offspring distribution is a discrete probability distribution
that describes the random number of secondary infections
(offspring/descendants) generated by a single infected individual during
their entire infectious period.</p>
<p>The mean of the offspring distribution is the basic reproduction
number
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>),
which is defined as the average number of secondary cases caused by one
infected individual in a fully susceptible population. The model assumes
that an infinite supply of susceptibles is always available to infect,
making it suitable for modelling of early outbreaks of pathogens that
have not previously spread in a population.</p>
</div>
<p>The number of secondary infections is defined using
<code><a href="../reference/offspring_opts.html">offspring_opts()</a></code>. Different distributions can be specified
for individuals in the community (<a href="https://epiforecasts.io/ringbp/reference/offspring_opts.html#arg-community"><code>community</code></a>),
those who are isolated (<a href="https://epiforecasts.io/ringbp/reference/offspring_opts.html#arg-isolated"><code>isolated</code></a>)
and infected individuals that are asymptomatic (or paucisymptomatic) (<a href="https://epiforecasts.io/ringbp/reference/offspring_opts.html#arg-asymptomatic"><code>asymptomatic</code></a>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">offspring</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/offspring_opts.html">offspring_opts</a></span><span class="op">(</span></span>
<span>  community <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/NegBinomial.html" class="external-link">rnbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fl">2.5</span>, size <span class="op">=</span> <span class="fl">0.16</span><span class="op">)</span>,</span>
<span>  isolated <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Geometric.html" class="external-link">rgeom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, prob <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span>, </span>
<span>  asymptomatic <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, lambda <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The offspring distribution for asymptomatic individuals (<a href="https://epiforecasts.io/ringbp/reference/offspring_opts.html#arg-asymptomatic"><code>asymptomatic</code></a>)
does not need to be specified, in which case it is assumed to be the
same as the offspring distribution of symptomatic infectors in the
community (<a href="https://epiforecasts.io/ringbp/reference/offspring_opts.html#arg-community"><code>community</code></a>).</p>
</div>
<div class="section level3">
<h3 id="delay-distributions">Delay distributions<a class="anchor" aria-label="anchor" href="#delay-distributions"></a>
</h3>
<p>Key epidemiological delays, such as the incubation period (<a href="https://epiforecasts.io/ringbp/reference/delay_opts.html#arg-incubation-period"><code>incubation_period</code></a>)
and time from symptom onset to isolation (<a href="https://epiforecasts.io/ringbp/reference/delay_opts.html#arg-onset-to-isolation"><code>onset_to_isolation</code></a>),
are specified using <code><a href="../reference/delay_opts.html">delay_opts()</a></code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">delays</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/delay_opts.html">delay_opts</a></span><span class="op">(</span></span>
<span>  incubation_period <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Lognormal.html" class="external-link">rlnorm</a></span><span class="op">(</span><span class="va">n</span>, meanlog <span class="op">=</span> <span class="fl">0.9</span>, sdlog <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  onset_to_isolation <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/GammaDist.html" class="external-link">rgamma</a></span><span class="op">(</span><span class="va">n</span>, shape <span class="op">=</span> <span class="fl">3</span>, scale <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-info">
<p><em>Isolation</em> is the separation of infectious individuals from
others, with the aim to prevent further transmission.</p>
<p>In the {ringbp} model, <em>isolated</em> individuals have their own
transmission dynamics (see <code><a href="../reference/offspring_opts.html">offspring_opts()</a></code> above).
{ringbp} allows infected individuals in isolation to transmit
(i.e. non-zero reproduction number), and can even have higher
transmissibility than infectors in the community.</p>
</div>
<p>The arguments to both <code><a href="../reference/offspring_opts.html">offspring_opts()</a></code> and
<code><a href="../reference/delay_opts.html">delay_opts()</a></code> are functions of <code>n</code>: they take an
integer <code>n</code> and return a vector of <code>n</code> random
samples from a given distribution. This lets you sample offspring or
delay values for multiple individuals in a single step of the
simulation.</p>
</div>
<div class="section level3">
<h3 id="event-probabilities">Event probabilities<a class="anchor" aria-label="anchor" href="#event-probabilities"></a>
</h3>
<p>Probabilities governing infection and detection events are set using
<code><a href="../reference/event_prob_opts.html">event_prob_opts()</a></code>. The probability that an infector is
asymptomatic (<a href="https://epiforecasts.io/ringbp/reference/event_prob_opts.html#arg-asymptomatic"><code>asymptomatic</code></a>),
the proportion of disease transmission that occurs before symptom onset
(<a href="https://epiforecasts.io/ringbp/reference/event_prob_opts.html#arg-presymptomatic-transmission"><code>presymptomatic_transmission</code></a>),
and the proportion of symptomatic individuals that are ascertained by
contact tracing (<a href="https://epiforecasts.io/ringbp/reference/event_prob_opts.html#arg-symptomatic-ascertained"><code>symptomatic_ascertained</code></a>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_probs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/event_prob_opts.html">event_prob_opts</a></span><span class="op">(</span></span>
<span>  asymptomatic <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  presymptomatic_transmission <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  symptomatic_ascertained <span class="op">=</span> <span class="fl">0.2</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="alert alert-info">
<p><em>Contact tracing</em> is the process of identifying and isolating
people who have been in contact with individuals that have tested
positive for the infection.</p>
</div>
</div>
<div class="section level3">
<h3 id="intervention-options">Intervention options<a class="anchor" aria-label="anchor" href="#intervention-options"></a>
</h3>
<div class="alert alert-info">
<p>Quarantine in the {ringbp} model is defined as the isolation of
individuals independent of their infection status. Contacts can be
isolated before they are symptomatic once the infecting individual is
confirmed to be infected and goes into isolation. It differs from
isolation in the model, which requires the infectee to be
symptomatic.</p>
</div>
<p>Interventions, thus far only quarantine (<a href="https://epiforecasts.io/ringbp/reference/intervention_opts.html#arg-quarantine"><code>quarantine</code></a>)
is implemented, can be turned on or off via
<code><a href="../reference/intervention_opts.html">intervention_opts()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interventions</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/intervention_opts.html">intervention_opts</a></span><span class="op">(</span>quarantine <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>By default, isolation of symptomatic cases is active and qurantine is
not active.</p>
</div>
<div class="section level3">
<h3 id="simulation-controls">Simulation controls<a class="anchor" aria-label="anchor" href="#simulation-controls"></a>
</h3>
<p>Finally, global simulation limits (for example, maximum duration (<a href="https://epiforecasts.io/ringbp/reference/sim_opts.html#arg-cap-max-days"><code>cap_max_days</code></a>)
or outbreak size (<a href="https://epiforecasts.io/ringbp/reference/sim_opts.html#arg-cap-cases"><code>cap_cases</code></a>))
are specified using <code><a href="../reference/sim_opts.html">sim_opts()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sim_opts.html">sim_opts</a></span><span class="op">(</span></span>
<span>  cap_max_days <span class="op">=</span> <span class="fl">350</span>,</span>
<span>  cap_cases <span class="op">=</span> <span class="fl">4500</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="running-outbreak-simulations">Running outbreak simulations<a class="anchor" aria-label="anchor" href="#running-outbreak-simulations"></a>
</h2>
<p>With all components defined, simulations can be run using
<code><a href="../reference/scenario_sim.html">scenario_sim()</a></code>. The example below runs 100 independent
outbreak simulations starting from a single initial case.</p>
<div class="alert alert-info">
<p><em>Stochastic epidemic model</em>: the {ringbp} model uses random
simulations to reflect the inherent uncertainty in real‑world
outbreaks.</p>
</div>
<p>We set the seed to ensure we have the same output each time the
vignette is rendered. When using {ringbp}, setting the seed is not
required unless you need to simulate the same outbreak multiple
times.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">outbreak</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scenario_sim.html">scenario_sim</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  initial_cases <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  offspring <span class="op">=</span> <span class="va">offspring</span>,</span>
<span>  delays <span class="op">=</span> <span class="va">delays</span>,</span>
<span>  event_probs <span class="op">=</span> <span class="va">event_probs</span>,</span>
<span>  interventions <span class="op">=</span> <span class="va">interventions</span>,</span>
<span>  sim <span class="op">=</span> <span class="va">sim</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The returned object is a <code>data.table</code> containing the
simulated outbreak trajectories. The columns are:</p>
<ul>
<li>
<code>sim</code>: simulation replicate ID</li>
<li>
<code>week</code>: outbreak week, zero indexed</li>
<li>
<code>weekly_cases</code>: number of new cases that week</li>
<li>
<code>cumulative</code>: cumulative weekly cases</li>
<li>
<code>effective_r0</code>: the effective reproduction number, the
same for each simulation replicate</li>
<li>
<code>cases_per_gen</code>: the number of cases per generation of
the outbreak</li>
</ul>
</div>
<div class="section level2">
<h2 id="visualising-results">Visualising results<a class="anchor" aria-label="anchor" href="#visualising-results"></a>
</h2>
<p>A simple way to explore results is to plot cumulative cases over
time.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://grantmcdermott.com/tinyplot/man/tinyplot.html" class="external-link">tinyplot</a></span><span class="op">(</span></span>
<span>  <span class="va">cumulative</span> <span class="op">~</span> <span class="va">week</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span>, </span>
<span>  data <span class="op">=</span> <span class="va">outbreak</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"l"</span>, </span>
<span>  lwd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Cumulative number of cases"</span>, </span>
<span>  xlab <span class="op">=</span> <span class="st">"Week"</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  theme <span class="op">=</span> <span class="st">"clean"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ringbp_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="" width="768"></p>
<p>We can also plot the weekly incidence of cases. <em>Note</em>: the
maximum number of cases in the simulation is set to 4,500, so the
decline in cases to zero is due to reaching that upper bound.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://grantmcdermott.com/tinyplot/man/tinyplot.html" class="external-link">tinyplot</a></span><span class="op">(</span></span>
<span>  <span class="va">weekly_cases</span> <span class="op">~</span> <span class="va">week</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span>, </span>
<span>  data <span class="op">=</span> <span class="va">outbreak</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"l"</span>, </span>
<span>  lwd <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Weekly number of cases"</span>, </span>
<span>  xlab <span class="op">=</span> <span class="st">"Week"</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  theme <span class="op">=</span> <span class="st">"clean"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="ringbp_files/figure-html/unnamed-chunk-10-1.png" class="r-plt" alt="" width="768"></p>
</div>
<div class="section level2">
<h2 id="summarising-outcomes">Summarising outcomes<a class="anchor" aria-label="anchor" href="#summarising-outcomes"></a>
</h2>
<p>A common quantity of interest is the probability that an outbreak
goes extinct (i.e. dies out without sustained transmission). This can be
calculated using <code><a href="../reference/extinction.html">extinct_prob()</a></code>.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extinction.html">extinct_prob</a></span><span class="op">(</span><span class="va">outbreak</span><span class="op">)</span></span>
<span><span class="co">#&gt; Calculating extinction using the extinction status from the simulation.</span></span>
<span><span class="co">#&gt; [1] 0.8</span></span></code></pre></div>
<p>By default, extinction is defined as all infectious individuals have
had the opportunity to transmit but no new infections are generated. The
<code>extinction_week</code> argument in <code><a href="../reference/extinction.html">extinct_prob()</a></code> can
also be used to specify whether extinction has happened by a certain
week, e.g. <code>extinct_prob(..., extinction_week = 5)</code> checks
whether extinction has occurred by week 5 of the outbreak. See
<code><a href="../reference/extinction.html">?extinct_prob</a></code> for other methods of checking for
extinction.</p>
</div>
<div class="section level2">
<h2 id="simplified-covid-19-contact-tracing-effectiveness-analysis">Simplified COVID-19 contact tracing effectiveness analysis<a class="anchor" aria-label="anchor" href="#simplified-covid-19-contact-tracing-effectiveness-analysis"></a>
</h2>
<p>Next we demonstrate how to use {ringbp} to reproduce a simplified
version of the outbreak control analysis from <span class="citation">Hellewell et al. (<a href="#ref-Hellewell2020">2020</a>)</span>. This study, published in the
first months of the COVID-19 pandemic, modelled the probability that an
introduced COVID-19 outbreak is contained by isolation and contact
tracing. Containment was defined as no disease transmission between
weeks 12-16 of the outbreak and the outbreak not reaching 5,000 total
cases.</p>
<p>Using the functions described above we define several parameter sets
to analyse how varying the basic reproduction number in the community,
the proportion of contacts successfully traced, and the number of
initial infectors that seed independent outbreaks influence the
likelihood of outbreak control.</p>
<p>This is a simplified version of the analysis from <span class="citation">Hellewell et al. (<a href="#ref-Hellewell2020">2020</a>)</span>, for the full analysis see
the <a href="https://github.com/cmmid/ringbp" class="external-link">GitHub repository with the
analysis scripts</a>.</p>
</div>
<div class="section level2">
<h2 id="define-epidemiological-parameters">Define epidemiological parameters<a class="anchor" aria-label="anchor" href="#define-epidemiological-parameters"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scenarios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/data.table/man/data.table.html" class="external-link">data.table</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span></span>
<span>    initial_cases <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">20</span><span class="op">)</span>,</span>
<span>    r0_community <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">2.5</span><span class="op">)</span>,</span>
<span>    symptomatic_ascertained <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.5</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">scenarios</span><span class="op">[</span>, <span class="va">scenario</span> <span class="op">:=</span>  <span class="fl">1</span><span class="op">:</span><span class="va">.N</span><span class="op">]</span></span>
<span><span class="va">scenarios</span> <span class="op">&lt;-</span> <span class="va">scenarios</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">.SD</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="va">scenario</span><span class="op">]</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="run-the-simulation">Run the simulation<a class="anchor" aria-label="anchor" href="#run-the-simulation"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span></span>
<span><span class="va">scenarios</span><span class="op">[</span>, <span class="va">sims</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">data</span>, \<span class="op">(</span><span class="va">x</span>, <span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/scenario_sim.html">scenario_sim</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="va">n</span>,</span>
<span>    initial_cases <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">initial_cases</span>,</span>
<span>    offspring <span class="op">=</span> <span class="fu"><a href="../reference/offspring_opts.html">offspring_opts</a></span><span class="op">(</span></span>
<span>      community <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/NegBinomial.html" class="external-link">rnbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">r0_community</span>, size <span class="op">=</span> <span class="fl">0.16</span><span class="op">)</span>,</span>
<span>      isolated <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/NegBinomial.html" class="external-link">rnbinom</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span>, mu <span class="op">=</span> <span class="fl">0</span>, size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    delays <span class="op">=</span> <span class="fu"><a href="../reference/delay_opts.html">delay_opts</a></span><span class="op">(</span></span>
<span>      incubation_period <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Weibull.html" class="external-link">rweibull</a></span><span class="op">(</span><span class="va">n</span>, shape <span class="op">=</span> <span class="fl">1.65</span>, scale <span class="op">=</span> <span class="fl">4.28</span><span class="op">)</span>,</span>
<span>      onset_to_isolation <span class="op">=</span> \<span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/stats/Weibull.html" class="external-link">rweibull</a></span><span class="op">(</span><span class="va">n</span>, shape <span class="op">=</span> <span class="fl">1.65</span>, scale <span class="op">=</span> <span class="fl">2.31</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    event_probs <span class="op">=</span> <span class="fu"><a href="../reference/event_prob_opts.html">event_prob_opts</a></span><span class="op">(</span></span>
<span>       asymptomatic <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>       presymptomatic_transmission <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>       symptomatic_ascertained <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">symptomatic_ascertained</span></span>
<span>    <span class="op">)</span>,</span>
<span>    interventions <span class="op">=</span> <span class="fu"><a href="../reference/intervention_opts.html">intervention_opts</a></span><span class="op">(</span>quarantine <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    sim <span class="op">=</span> <span class="fu"><a href="../reference/sim_opts.html">sim_opts</a></span><span class="op">(</span>cap_max_days <span class="op">=</span> <span class="fl">365</span>, cap_cases <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  n <span class="op">=</span> <span class="va">n</span></span>
<span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>For a more detailed example of running {ringbp} across multiple
parameter sets see the <a href="parameter-sweep.html"><code>parameter-sweep.Rmd</code>
vignette</a>, which also includes information on how to parallelise the
simulation.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">scenarios</span><span class="op">[</span>, </span>
<span>  <span class="va">pext</span> <span class="op">:=</span> <span class="fu"><a href="../reference/extinction.html">extinct_prob</a></span><span class="op">(</span><span class="va">sims</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, extinction_week <span class="op">=</span> <span class="fl">12</span><span class="op">:</span><span class="fl">16</span><span class="op">)</span>, </span>
<span>  by <span class="op">=</span> <span class="va">scenario</span></span>
<span><span class="op">]</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span><span class="co">#&gt; Calculating extinction as no new cases within weeks: 12 to 16 (inclusive).</span></span>
<span></span>
<span><span class="co"># probability of extinction for each scenario</span></span>
<span><span class="va">scenarios</span><span class="op">$</span><span class="va">pext</span></span>
<span><span class="co">#&gt;  [1] 0.9 0.5 0.5 0.2 1.0 1.0 0.9 0.5 1.0 1.0 1.0 0.9</span></span></code></pre></div>
<p><span class="citation">Hellewell et al. (<a href="#ref-Hellewell2020">2020</a>)</span> used {ringbp} to show
that:</p>
<ul>
<li>Outbreaks are controllable if contact tracing is fast and covers a
high proportion of contacts</li>
<li>Delays in isolating cases or many undetected asymptomatic cases make
control unlikely</li>
<li>Small initial clusters are easier to contain than larger ones</li>
</ul>
</div>
<div class="section level2">
<h2 id="ringbp-use-cases">{ringbp} Use Cases<a class="anchor" aria-label="anchor" href="#ringbp-use-cases"></a>
</h2>
<p>This vignette has focused on the high-level workflow for running
simulations with {ringbp}. Further uses of the package include, but are
not limited to:</p>
<ul>
<li>Simulate outbreaks under different assumptions about
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>R</mi><mn>0</mn></msub><annotation encoding="application/x-tex">R_0</annotation></semantics></math>,
incubation period, and proportion of asymptomatic infections.</li>
<li>Explore the impact of delays in isolation and the effectiveness of
contact tracing.</li>
<li>Estimate the probability of outbreak extinction under different
intervention strategies.</li>
</ul>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-Hellewell2020" class="csl-entry">
Hellewell, Joel, Sam Abbott, Amy Gimma, Nikos I Bosse, Christopher I
Jarvis, Timothy W Russell, James D Munday, et al. 2020.
<span>“Feasibility of Controlling COVID-19 Outbreaks by Isolation of
Cases and Contacts.”</span> <em>The Lancet Global Health</em> 8 (4):
e488–96. <a href="https://doi.org/10.1016/s2214-109x(20)30074-7" class="external-link">https://doi.org/10.1016/s2214-109x(20)30074-7</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Joel Hellewell, Sam Abbott, Amy Gimma, Tim Lucas, Sebastian Funk, Adam Kucharski, Joshua W. Lambert.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
